{{ expect .port "^\\d+/\\d/" }}
{{ expect .name "string" }}
{{ expect .ip "ip" }}
{{ optional .vlan "0-4096" }}
{{ optional .isis_iid "0-32" }}

{{ if contains  "/c" .port }}
/configure port {{ slice 0 -2 .port }} admin-state enable
/configure port {{ .port | slice 0 -2 }} connector breakout c1-10g
{{ end }}

/configure port {{ .port }} admin-state enable

/configure router interface {{ .name }}
    ipv4 primary address {{ ip .ip }}
    ipv4 primary prefix-length {{ ipmask .ip }}
    port {{ .port }}:{{ default 1 .vlan }}

/configure router isis {{ default 0 .isis_iid }}
    interface {{ .name }}

/configure router rsvp
    interface {{ .name }} admin-state enable

/configure router mpls
    interface {{ .name }} admin-state enable
